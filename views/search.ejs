<%layout("/layouts/boilerplate") %>

<% if (searchQuery) { %>
    <h2>Showing results for "<%= searchQuery %>"</h2>
<% } %>

<div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1">
    <% if (allListings.length > 0) { %>
        <% allListings.forEach(listing => { %>
            <a href="/listings/<%= listing._id %>" class="listing-link">
                <div class="card col">
                    <img src="<%= listing.image ? listing.image.url : '/images/default.jpg' %>" class="card-img-top" alt="listing image" style="height:20rem;">
                    <div class="card-body">
                        <h3><%= listing.title %></h3>
                        <p>Location: <%= listing.location %></p>
                        <p>Country: <%= listing.country %></p>
                    </div>
                </div>
            </a>
        <% }) %>
    <% } else { %>
        <p>No listings found for "<%= searchQuery %>". Try another destination.</p>
    <% } %>
</div>
